<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Avatar Widget - CDN Snippet</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        line-height: 1.6;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        color: #333;
      }
      h1 { margin-bottom: 30px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
      code {
        font-family: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace;
        background-color: #f5f5f5;
        padding: 2px 5px;
        border-radius: 3px;
        font-size: 0.9em;
      }
      pre {
        background-color: #f5f5f5;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
        border: 1px solid #ddd;
      }
      .code-container {
        position: relative;
      }
      .copy-button {
        position: absolute;
        top: 5px;
        right: 5px;
        background: #4a68b1;
        color: white;
        border: none;
        border-radius: 3px;
        padding: 5px 10px;
        font-size: 12px;
        cursor: pointer;
      }
      .copy-button:hover {
        background: #3a5491;
      }
      .success-message {
        display: none;
        background: #4CAF50;
        color: white;
        padding: 5px 10px;
        border-radius: 3px;
        position: absolute;
        top: 5px;
        right: 90px;
      }
      .integration-options {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin: 30px 0;
      }
      .option-card {
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 20px;
        flex: 1;
        min-width: 300px;
      }
      .option-card h3 {
        margin-top: 0;
      }
    </style>
  </head>
  <body>
    <h1>AI Avatar Widget - CDN Snippet Generator</h1>
    
    <p>Use this simple tool to generate a CDN integration snippet for your AI Avatar widget. Simply fill in your details below and copy the generated code.</p>
    
    <div class="option-card">
      <h3>Configure Your Widget</h3>
      <form id="config-form">
        <p>
          <label for="knowledge-id">Knowledge ID:</label><br>
          <input type="text" id="knowledge-id" value="68e604b9028f2f5066e31678" style="width: 100%; padding: 8px; margin-top: 5px;">
        </p>
        <p>
          <label for="avatar-id">Avatar ID:</label><br>
          <input type="text" id="avatar-id" value="Tyler-insuit-20220721" style="width: 100%; padding: 8px; margin-top: 5px;">
        </p>
        <p>
          <label for="message">Opening Message:</label><br>
          <input type="text" id="message" value="Hello! How can I help you today?" style="width: 100%; padding: 8px; margin-top: 5px;">
        </p>
        <p>
          <label for="cdn-base">CDN Base URL:</label><br>
          <input type="text" id="cdn-base" value="https://yourusername.github.io/ai-avatar-widget" style="width: 100%; padding: 8px; margin-top: 5px;">
        </p>
        <p>
          <label for="position">Widget Position:</label><br>
          <select id="position" style="width: 100%; padding: 8px; margin-top: 5px;">
            <option value="bottom-right">Bottom Right</option>
            <option value="bottom-left">Bottom Left</option>
            <option value="top-right">Top Right</option>
            <option value="top-left">Top Left</option>
          </select>
        </p>
        <button type="button" id="generate-btn" style="background: #4a68b1; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px;">Generate Snippet</button>
      </form>
    </div>

    <h2>Your Integration Snippet</h2>
    <p>Copy and paste this code just before the closing <code>&lt;/body&gt;</code> tag on your website:</p>
    
    <div class="code-container">
      <pre id="snippet-code"><!-- AI Avatar Widget will be generated here --></pre>
      <button class="copy-button" onclick="copySnippet()">Copy Code</button>
      <span class="success-message" id="copy-success">Copied!</span>
    </div>

    <h2>Integration Options</h2>
    <div class="integration-options">
      <div class="option-card">
        <h3>Simple Integration</h3>
        <p>One-line script tag that loads everything needed.</p>
        <ul>
          <li>✅ Easiest to implement</li>
          <li>✅ Automatically loads dependencies</li>
          <li>✅ Works on any website</li>
        </ul>
      </div>
      <div class="option-card">
        <h3>Manual Integration</h3>
        <p>Load and initialize each component separately.</p>
        <ul>
          <li>✅ More control over loading</li>
          <li>✅ Custom styling options</li>
          <li>✅ Advanced configuration</li>
        </ul>
      </div>
    </div>

    <h2>Testing Your Integration</h2>
    <p>After adding the snippet to your website:</p>
    <ol>
      <li>Check that the chat widget appears at the selected position</li>
      <li>Click the widget button to open the chat interface</li>
      <li>Test the AI responses with sample questions</li>
      <li>Check browser console (F12) for any errors</li>
    </ol>

    <script>
      function generateSnippet() {
        const knowledgeId = document.getElementById('knowledge-id').value;
        const avatarId = document.getElementById('avatar-id').value;
        const message = document.getElementById('message').value;
        const cdnBase = document.getElementById('cdn-base').value.replace(/\/$/, '');
        const position = document.getElementById('position').value;
        
        // Determine position CSS
        let positionCSS = '';
        switch(position) {
          case 'bottom-right':
            positionCSS = 'bottom: 20px; right: 20px;';
            break;
          case 'bottom-left':
            positionCSS = 'bottom: 20px; left: 20px;';
            break;
          case 'top-right':
            positionCSS = 'top: 20px; right: 20px;';
            break;
          case 'top-left':
            positionCSS = 'top: 20px; left: 20px;';
            break;
        }

        const snippet = `<!-- AI Avatar Widget Integration -->
<div id="ai-avatar-widget" style="position: fixed; ${positionCSS} z-index: 9999;"></div>

<!-- One-line integration script -->
<script>
  (function(d,s,id,k,a,m){
    if(d.getElementById(id)) return;
    var js, fjs = d.getElementsByTagName(s)[0];
    js = d.createElement(s); js.id = id; js.async = true;
    js.src = "${cdnBase}/dist/avatar-widget.umd.js";
    var link = d.createElement('link');
    link.rel = 'stylesheet'; 
    link.href = "${cdnBase}/dist/ai-avatar.css";
    d.head.appendChild(link);
    fjs.parentNode.insertBefore(js, fjs);
    
    // Load React if needed
    function loadDependency(src, callback) {
      var script = document.createElement('script');
      script.src = src;
      script.crossOrigin = "anonymous";
      script.onload = callback;
      document.head.appendChild(script);
    }
    
    js.onload = function() {
      if(typeof React === 'undefined') {
        loadDependency('https://unpkg.com/react@18/umd/react.production.min.js', function() {
          loadDependency('https://unpkg.com/react-dom@18/umd/react-dom.production.min.js', function() {
            window.renderAvatarWidget('ai-avatar-widget', {
              knowledgeID: k || '68e604b9028f2f5066e31678', 
              avatarId: a || 'Tyler-insuit-20220721',
              openingMessage: m || 'Hello! How can I help you today?'
            });
          });
        });
      } else if(typeof ReactDOM === 'undefined') {
        loadDependency('https://unpkg.com/react-dom@18/umd/react-dom.production.min.js', function() {
          window.renderAvatarWidget('ai-avatar-widget', {
            knowledgeID: k || '68e604b9028f2f5066e31678', 
            avatarId: a || 'Tyler-insuit-20220721',
            openingMessage: m || 'Hello! How can I help you today?'
          });
        });
      } else {
        window.renderAvatarWidget('ai-avatar-widget', {
          knowledgeID: k || '68e604b9028f2f5066e31678', 
          avatarId: a || 'Tyler-insuit-20220721',
          openingMessage: m || 'Hello! How can I help you today?'
        });
      }
    }
  })(document,'script','avatar-widget-script','${knowledgeId}','${avatarId}','${message}');
<\/script>`;

        document.getElementById('snippet-code').textContent = snippet;
      }

      function copySnippet() {
        const snippetCode = document.getElementById('snippet-code').textContent;
        navigator.clipboard.writeText(snippetCode).then(() => {
          const successMsg = document.getElementById('copy-success');
          successMsg.style.display = 'inline';
          setTimeout(() => {
            successMsg.style.display = 'none';
          }, 2000);
        });
      }

      document.getElementById('generate-btn').addEventListener('click', generateSnippet);
      
      // Generate default snippet on load
      document.addEventListener('DOMContentLoaded', generateSnippet);
    </script>
  </body>
</html>